<?xml version="1.0" encoding="UTF-8" ?>
<service>
	<method name="selectVendorList_20150401">
		SELECT
			INFO.VENDOR_CODE,
			GETVENDORNAME( INFO.HOUSE_CODE,  INFO.VENDOR_CODE) AS VENDOR_NAME
		FROM
			ICOYINFO INFO,
			ICOMVNGL VNGL,
			ICOMLUSR USR
		WHERE 1=1
		AND INFO.HOUSE_CODE          = ${HOUSE_CODE}
		AND INFO.COMPANY_CODE        = ${COMPANY_CODE}
		AND INFO.PURCHASE_LOCATION   = NVL($S{pr_location}, '01')
		AND INFO.ITEM_NO             = $S{item_no}
		AND INFO.HOUSE_CODE          = VNGL.HOUSE_CODE
		AND INFO.VENDOR_CODE         = VNGL.VENDOR_CODE
		AND VNGL.PURCHASE_BLOCK_FLAG != 'Y'
		AND INFO.HOUSE_CODE          = USR.HOUSE_CODE
		AND INFO.VENDOR_CODE         = USR.USER_ID
		AND USR.LOGIN_NCY            = 'Y'
		AND TO_CHAR(SYSDATE, 'YYYYMMDD') BETWEEN INFO.VALID_FROM_DATE AND INFO.VALID_TO_DATE
	</method>
	
	<method name="selectVendorList_20211124">
		SELECT
			INFO.VENDOR_CODE,
			GETVENDORNAME( INFO.HOUSE_CODE,  INFO.VENDOR_CODE) AS VENDOR_NAME
		FROM
			ICOYINFO INFO,
			ICOMVNGL VNGL
		WHERE 1=1
		AND INFO.HOUSE_CODE          = ${HOUSE_CODE}
		AND INFO.COMPANY_CODE        = ${COMPANY_CODE}
		AND INFO.PURCHASE_LOCATION   = NVL($S{pr_location}, '01')
		AND INFO.ITEM_NO             = $S{item_no}
		AND INFO.HOUSE_CODE          = VNGL.HOUSE_CODE
		AND INFO.VENDOR_CODE         = VNGL.VENDOR_CODE
		AND VNGL.PURCHASE_BLOCK_FLAG != 'Y'
		AND TO_CHAR(SYSDATE, 'YYYYMMDD') BETWEEN INFO.VALID_FROM_DATE AND INFO.VALID_TO_DATE
	</method>
	
	<method name="selectVendorList">
		SELECT
			INFO.VENDOR_CODE,
			GETVENDORNAME( INFO.HOUSE_CODE,  INFO.VENDOR_CODE) AS VENDOR_NAME
		FROM
			ICOYINFO INFO,
			ICOMVNGL VNGL
		WHERE 1=1
		AND INFO.HOUSE_CODE          = ${HOUSE_CODE}
		AND INFO.COMPANY_CODE        = ${COMPANY_CODE}
		AND INFO.PURCHASE_LOCATION   = NVL($S{pr_location}, '01')
		AND INFO.ITEM_NO             = $S{item_no}
		AND INFO.HOUSE_CODE          = VNGL.HOUSE_CODE
		AND INFO.VENDOR_CODE         = VNGL.VENDOR_CODE
		AND INFO.STATUS              != 'D'
		AND VNGL.PURCHASE_BLOCK_FLAG != 'Y'
		AND TO_CHAR(SYSDATE, 'YYYYMMDD') BETWEEN INFO.VALID_FROM_DATE AND INFO.VALID_TO_DATE
	</method>
	
	<method name="selectUnitPrice">
		SELECT
			INFO.UNIT_PRICE,
			GETVENDORNAME( INFO.HOUSE_CODE,  INFO.VENDOR_CODE) AS VENDOR_NAME
		FROM
			ICOYINFO INFO
		WHERE 1=1
		AND INFO.HOUSE_CODE          = ${HOUSE_CODE}
		AND INFO.COMPANY_CODE        = ${COMPANY_CODE}
		AND INFO.PURCHASE_LOCATION   = NVL(${PURCHASE_LOCATION}, '01')
		AND INFO.ITEM_NO             = ${ITEM_NO}
		AND INFO.VENDOR_CODE         = ${VENDOR_CODE}
		AND TO_CHAR(SYSDATE, 'YYYYMMDD') BETWEEN INFO.VALID_FROM_DATE AND INFO.VALID_TO_DATE
	</method>
</service>